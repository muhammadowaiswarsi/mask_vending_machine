{"ast":null,"code":"import _regeneratorRuntime from\"/home/wasif/Documents/Office/mask_vending_machine/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/wasif/Documents/Office/mask_vending_machine/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/home/wasif/Documents/Office/mask_vending_machine/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/wasif/Documents/Office/mask_vending_machine/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{AmplifySignOut}from\"@aws-amplify/ui-react\";import{API,graphqlOperation}from\"aws-amplify\";import React,{useEffect,useState}from\"react\";import Loader from\"react-spinners/ClipLoader\";import{listOrders}from\"../../graphql/queries\";import\"./money.css\";export default function MoneyPage(_ref){var _listOrder$price,_listOrder$profit;var changeMoney=_ref.changeMoney,data=_ref.data;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),allChecked=_useState2[0],setallChecked=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),listOrder=_useState4[0],setListOrder=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setloading=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),lists=_useState8[0],changeLists=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),templists=_useState10[0],changeTempLists=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),maskPrice=_useState12[0],setMaskPrice=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),profitShare=_useState14[0],setProfitShare=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),id=_useState16[0],setId=_useState16[1];var checkAllCheckboxes=function checkAllCheckboxes(){if(!allChecked)changeTempLists(lists);else{var temp=_toConsumableArray(lists);temp.forEach(function(item){item.checked=false;});changeLists(temp);changeTempLists([]);}setallChecked(!allChecked);setMaskPrice(\"\");setProfitShare(\"\");setId(\"\");};var GettingApi=function GettingApi(){API.graphql(graphqlOperation(listOrders)).then(function(res){var temp={profit:0,price:0};var temp1=0;for(var i=0;i<(templists===null||templists===void 0?void 0:templists.length);i++){for(var k=0;k<(res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:(_res$data$listOrders=_res$data.listOrders)===null||_res$data$listOrders===void 0?void 0:(_res$data$listOrders$=_res$data$listOrders.items)===null||_res$data$listOrders$===void 0?void 0:_res$data$listOrders$.length);k++){var _res$data,_res$data$listOrders,_res$data$listOrders$,_res$data2,_res$data2$listOrders,_res$data2$listOrders2,_res$data2$listOrders3,_templists$i,_res$data3,_res$data3$listOrders,_res$data3$listOrders2,_res$data3$listOrders3;console.log(res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:(_res$data2$listOrders=_res$data2.listOrders)===null||_res$data2$listOrders===void 0?void 0:(_res$data2$listOrders2=_res$data2$listOrders.items[k])===null||_res$data2$listOrders2===void 0?void 0:(_res$data2$listOrders3=_res$data2$listOrders2.masqomat)===null||_res$data2$listOrders3===void 0?void 0:_res$data2$listOrders3.id,(_templists$i=templists[i])===null||_templists$i===void 0?void 0:_templists$i.masqomatId);if(templists[i].masqomatId===(res===null||res===void 0?void 0:(_res$data3=res.data)===null||_res$data3===void 0?void 0:(_res$data3$listOrders=_res$data3.listOrders)===null||_res$data3$listOrders===void 0?void 0:(_res$data3$listOrders2=_res$data3$listOrders.items[k])===null||_res$data3$listOrders2===void 0?void 0:(_res$data3$listOrders3=_res$data3$listOrders2.masqomat)===null||_res$data3$listOrders3===void 0?void 0:_res$data3$listOrders3.id)){var _templists$i2,_templists$i3;temp.profit+=Number((_templists$i2=templists[i])===null||_templists$i2===void 0?void 0:_templists$i2.profitShare);temp.price+=Number((_templists$i3=templists[i])===null||_templists$i3===void 0?void 0:_templists$i3.priceNetto);++temp1;}}}temp.total=temp1;temp.profit=Number(temp.profit)/temp1;setListOrder(temp);});};useEffect(function(){GettingApi();},[templists]);useEffect(function(){changeLists(data);},[data]);var updateChecked=function updateChecked(i){if(!allChecked){if(i||i===0){if(lists[i].checked){setMaskPrice(\"\");setProfitShare(\"\");setId(\"\");changeTempLists([]);}else{if(templists.length===0){var _lists$i,_lists$i2;setMaskPrice(lists[i].priceNetto);setProfitShare((_lists$i=lists[i])===null||_lists$i===void 0?void 0:_lists$i.profitShare);setId((_lists$i2=lists[i])===null||_lists$i2===void 0?void 0:_lists$i2.productId);}else{setProfitShare(\"\");setId(\"\");setMaskPrice(\"\");}var _temp=_toConsumableArray(templists);_temp.push(lists[i]);changeTempLists(_temp);}var temp=_toConsumableArray(lists);temp[i].checked=!temp[i].checked;changeLists(temp);}}};return/*#__PURE__*/React.createElement(\"div\",{className:\"money-page-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"sign-out\"},/*#__PURE__*/React.createElement(AmplifySignOut,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"sales-figure\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"sales-headings\"},\"sales figures\"),/*#__PURE__*/React.createElement(\"p\",{className:\"sales-values\"},new Date().toDateString().split(\" \")[1],\".\",new Date().toDateString().split(\" \")[2])),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"sales-headings\"},\"total mask sold\"),/*#__PURE__*/React.createElement(\"p\",{className:\"sales-values sales-num-values\"},(listOrder===null||listOrder===void 0?void 0:listOrder.total)?listOrder===null||listOrder===void 0?void 0:listOrder.total:0)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"sales-headings\"},\"total sales\"),/*#__PURE__*/React.createElement(\"p\",{className:\"sales-values sales-num-values\"},(listOrder===null||listOrder===void 0?void 0:listOrder.price)?listOrder===null||listOrder===void 0?void 0:(_listOrder$price=listOrder.price)===null||_listOrder$price===void 0?void 0:_listOrder$price.toFixed(2):0,\"\\u20AC\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"sales-headings\"},\"total profit\"),/*#__PURE__*/React.createElement(\"p\",{className:\"sales-values sales-num-values\"},(listOrder===null||listOrder===void 0?void 0:listOrder.profit)&&(listOrder===null||listOrder===void 0?void 0:listOrder.profit)!==0?listOrder===null||listOrder===void 0?void 0:(_listOrder$profit=listOrder.profit)===null||_listOrder$profit===void 0?void 0:_listOrder$profit.toFixed(2):0,\"%\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"tenant-option\"},/*#__PURE__*/React.createElement(\"p\",{className:\"headings\"},\"tenant options\"),/*#__PURE__*/React.createElement(\"div\",{className:\"tenant-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"select-all\"},/*#__PURE__*/React.createElement(\"div\",{className:\"round\"},/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(){return checkAllCheckboxes();},type:\"checkbox\",id:\"checkbox\"}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"checkbox\"})),/*#__PURE__*/React.createElement(\"p\",{className:\"points\"},\"All\")),/*#__PURE__*/React.createElement(\"div\",{className:\"tenant-bottom-part\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tenant-list-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tenant-list-part\"},/*#__PURE__*/React.createElement(\"table\",{width:\"100%\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",{className:\"tenant-list-headings\"},/*#__PURE__*/React.createElement(\"td\",{className:\"roundPart\"},/*#__PURE__*/React.createElement(\"p\",null)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"p\",null,\"name\")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"p\",null,\"profit share\")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"p\",null,\"mask price\")))),lists===null||lists===void 0?void 0:lists.map(function(item,i){return/*#__PURE__*/React.createElement(\"tr\",{key:i,className:\"tenant-lists\"},/*#__PURE__*/React.createElement(\"td\",{className:\"roundPart\"},/*#__PURE__*/React.createElement(\"div\",{className:\"round\"},/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(){updateChecked(i);},checked:allChecked||(item===null||item===void 0?void 0:item.checked),value:allChecked||(item===null||item===void 0?void 0:item.checked),type:\"checkbox\",id:\"checkbox\"+i+1}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"checkbox\"+i+1}))),/*#__PURE__*/React.createElement(\"td\",null,item===null||item===void 0?void 0:item.location),/*#__PURE__*/React.createElement(\"td\",null,item===null||item===void 0?void 0:item.profitShare,\"%\"),/*#__PURE__*/React.createElement(\"td\",null,item===null||item===void 0?void 0:item.priceNetto,\"\\u20AC\"));}))),/*#__PURE__*/React.createElement(\"div\",{className:\"tenant-list-footer\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"tenant-changing-part\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,\"mask price:\"),/*#__PURE__*/React.createElement(\"input\",{className:\"inputs\",value:maskPrice,onChange:function onChange(e){return setMaskPrice(e.target.value);},type:\"text\"}),/*#__PURE__*/React.createElement(\"span\",null,\"\\u20AC\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,\"profit share:\"),/*#__PURE__*/React.createElement(\"input\",{className:\"inputs\",value:profitShare,onChange:function onChange(e){return setProfitShare(e.target.value);},type:\"text\"}),/*#__PURE__*/React.createElement(\"span\",null,\"%\")),/*#__PURE__*/React.createElement(\"div\",{className:\"set-changes\"},/*#__PURE__*/React.createElement(\"button\",{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!id){_context.next=5;break;}setloading(true);_context.next=4;return changeMoney(id,maskPrice,profitShare);case 4:setloading(false);case 5:case\"end\":return _context.stop();}}},_callee);}))},loading?/*#__PURE__*/React.createElement(Loader,{color:\"white\"}):\"set changes\")))))));}","map":{"version":3,"sources":["/home/wasif/Documents/Office/mask_vending_machine/src/components/MoneyPage/index.js"],"names":["AmplifySignOut","API","graphqlOperation","React","useEffect","useState","Loader","listOrders","MoneyPage","changeMoney","data","allChecked","setallChecked","listOrder","setListOrder","loading","setloading","lists","changeLists","templists","changeTempLists","maskPrice","setMaskPrice","profitShare","setProfitShare","id","setId","checkAllCheckboxes","temp","forEach","item","checked","GettingApi","graphql","then","res","profit","price","temp1","i","length","k","items","console","log","masqomat","masqomatId","Number","priceNetto","total","updateChecked","productId","push","Date","toDateString","split","toFixed","map","location","e","target","value"],"mappings":"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","sourcesContent":["import { AmplifySignOut } from \"@aws-amplify/ui-react\";\nimport { API, graphqlOperation } from \"aws-amplify\";\nimport React, { useEffect, useState } from \"react\";\nimport Loader from \"react-spinners/ClipLoader\";\nimport { listOrders } from \"../../graphql/queries\";\nimport \"./money.css\";\n\nexport default function MoneyPage({ changeMoney, data }) {\n  const [allChecked, setallChecked] = useState(false);\n  const [listOrder, setListOrder] = useState(false);\n  const [loading, setloading] = useState(false);\n  const [lists, changeLists] = useState([]);\n  const [templists, changeTempLists] = useState([]);\n  const [maskPrice, setMaskPrice] = useState(\"\");\n  const [profitShare, setProfitShare] = useState(\"\");\n  const [id, setId] = useState(\"\");\n  const checkAllCheckboxes = () => {\n    if (!allChecked) changeTempLists(lists);\n    else {\n      const temp = [...lists];\n      temp.forEach((item) => {\n        item.checked = false;\n      });\n      changeLists(temp);\n      changeTempLists([]);\n    }\n    setallChecked(!allChecked);\n    setMaskPrice(\"\");\n    setProfitShare(\"\");\n    setId(\"\");\n  };\n  const GettingApi = () => {\n    API.graphql(graphqlOperation(listOrders)).then((res) => {\n      let temp = { profit: 0, price: 0 };\n      let temp1 = 0;\n      for (let i = 0; i < templists?.length; i++) {\n        for (let k = 0; k < res?.data?.listOrders?.items?.length; k++) {\n          console.log(\n            res?.data?.listOrders?.items[k]?.masqomat?.id,\n            templists[i]?.masqomatId\n          );\n          if (\n            templists[i].masqomatId ===\n            res?.data?.listOrders?.items[k]?.masqomat?.id\n          ) {\n            temp.profit += Number(templists[i]?.profitShare);\n            temp.price += Number(templists[i]?.priceNetto);\n            ++temp1;\n          }\n        }\n      }\n      temp.total = temp1;\n      temp.profit = Number(temp.profit) / temp1;\n      setListOrder(temp);\n    });\n  };\n  useEffect(() => {\n    GettingApi();\n  }, [templists]);\n  useEffect(() => {\n    changeLists(data);\n  }, [data]);\n  const updateChecked = (i) => {\n    if (!allChecked) {\n      if (i || i === 0) {\n        if (lists[i].checked) {\n          setMaskPrice(\"\");\n          setProfitShare(\"\");\n          setId(\"\");\n          changeTempLists([]);\n        } else {\n          if (templists.length === 0) {\n            setMaskPrice(lists[i].priceNetto);\n            setProfitShare(lists[i]?.profitShare);\n            setId(lists[i]?.productId);\n          } else {\n            setProfitShare(\"\");\n            setId(\"\");\n            setMaskPrice(\"\");\n          }\n          const temp = [...templists];\n          temp.push(lists[i]);\n          changeTempLists(temp);\n        }\n        const temp = [...lists];\n        temp[i].checked = !temp[i].checked;\n        changeLists(temp);\n      }\n    }\n  };\n  return (\n    <div className=\"money-page-container\">\n      <div className=\"sign-out\">\n        <AmplifySignOut />\n      </div>\n      <div className=\"sales-figure\">\n        <div>\n          <p className=\"sales-headings\">sales figures</p>\n          <p className=\"sales-values\">\n            {new Date().toDateString().split(\" \")[1]}.\n            {new Date().toDateString().split(\" \")[2]}\n          </p>\n        </div>\n        <div>\n          <p className=\"sales-headings\">total mask sold</p>\n          <p className=\"sales-values sales-num-values\">\n            {listOrder?.total ? listOrder?.total : 0}\n          </p>\n        </div>\n        <div>\n          <p className=\"sales-headings\">total sales</p>\n          <p className=\"sales-values sales-num-values\">\n            {listOrder?.price ? listOrder?.price?.toFixed(2) : 0}€\n          </p>\n        </div>\n        <div>\n          <p className=\"sales-headings\">total profit</p>\n          <p className=\"sales-values sales-num-values\">\n            {listOrder?.profit && listOrder?.profit !== 0\n              ? listOrder?.profit?.toFixed(2)\n              : 0}\n            %\n          </p>\n        </div>\n      </div>\n      <div className=\"tenant-option\">\n        <p className=\"headings\">tenant options</p>\n        <div className=\"tenant-body\">\n          <div className=\"select-all\">\n            <div className=\"round\">\n              <input\n                onChange={() => checkAllCheckboxes()}\n                type=\"checkbox\"\n                id=\"checkbox\"\n              />\n              <label htmlFor=\"checkbox\"></label>\n            </div>\n            <p className=\"points\">All</p>\n          </div>\n          <div className=\"tenant-bottom-part\">\n            <div className=\"tenant-list-body\">\n              <div className=\"tenant-list-part\">\n                <table width=\"100%\">\n                  <thead>\n                    <tr className=\"tenant-list-headings\">\n                      <td className=\"roundPart\">\n                        <p></p>\n                      </td>\n                      <td>\n                        <p>name</p>\n                      </td>\n                      <td>\n                        <p>profit share</p>\n                      </td>\n                      <td>\n                        <p>mask price</p>\n                      </td>\n                    </tr>\n                  </thead>\n                  {lists?.map((item, i) => (\n                    <tr key={i} className=\"tenant-lists\">\n                      <td className=\"roundPart\">\n                        <div className=\"round\">\n                          <input\n                            onChange={() => {\n                              updateChecked(i);\n                            }}\n                            checked={allChecked || item?.checked}\n                            value={allChecked || item?.checked}\n                            type=\"checkbox\"\n                            id={\"checkbox\" + i + 1}\n                          />\n                          <label htmlFor={\"checkbox\" + i + 1}></label>\n                        </div>\n                      </td>\n                      <td>{item?.location}</td>\n                      <td>{item?.profitShare}%</td>\n                      <td>{item?.priceNetto}€</td>\n                    </tr>\n                  ))}\n                </table>\n              </div>\n              <div className=\"tenant-list-footer\"></div>\n            </div>\n            <div className=\"tenant-changing-part\">\n              <div>\n                <p>mask price:</p>\n                <input\n                  className=\"inputs\"\n                  value={maskPrice}\n                  onChange={(e) => setMaskPrice(e.target.value)}\n                  type=\"text\"\n                />\n                <span>€</span>\n              </div>\n              <div>\n                <p>profit share:</p>\n                <input\n                  className=\"inputs\"\n                  value={profitShare}\n                  onChange={(e) => setProfitShare(e.target.value)}\n                  type=\"text\"\n                />\n                <span>%</span>\n              </div>\n              <div className=\"set-changes\">\n                <button\n                  onClick={async () => {\n                    if (id) {\n                      setloading(true);\n                      await changeMoney(id, maskPrice, profitShare);\n                      setloading(false);\n                    }\n                  }}\n                >\n                  {loading ? <Loader color=\"white\" /> : \"set changes\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}